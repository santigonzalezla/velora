/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
var e=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var i={},n=t||{},a=e.split(";"),s=n.decode||r,c=0;c<a.length;c++){var p=a[c],u=p.indexOf("=");if(!(u<0)){var h=p.substring(0,u).trim();if(null==i[h]){var f=p.substring(u+1,p.length).trim();'"'===f[0]&&(f=f.slice(1,-1)),i[h]=o(f,s)}}}return i},t=function(e,t,r){var o=r||{},a=o.encode||i;if("function"!=typeof a)throw new TypeError("option encode is invalid");if(!n.test(e))throw new TypeError("argument name is invalid");var s=a(t);if(s&&!n.test(s))throw new TypeError("argument val is invalid");var c=e+"="+s;if(null!=o.maxAge){var p=o.maxAge-0;if(isNaN(p)||!isFinite(p))throw new TypeError("option maxAge is invalid");c+="; Max-Age="+Math.floor(p)}if(o.domain){if(!n.test(o.domain))throw new TypeError("option domain is invalid");c+="; Domain="+o.domain}if(o.path){if(!n.test(o.path))throw new TypeError("option path is invalid");c+="; Path="+o.path}if(o.expires){if("function"!=typeof o.expires.toUTCString)throw new TypeError("option expires is invalid");c+="; Expires="+o.expires.toUTCString()}o.httpOnly&&(c+="; HttpOnly");o.secure&&(c+="; Secure");if(o.sameSite){switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return c},r=decodeURIComponent,i=encodeURIComponent,n=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(e,t){try{return t(e)}catch(r){return e}}function a(e,t){void 0===t&&(t={});var r=function(e){if(e&&"j"===e[0]&&":"===e[1])return e.substr(2);return e}(e);if(function(e,t){return void 0===t&&(t=!e||"{"!==e[0]&&"["!==e[0]&&'"'!==e[0]),!t}(r,t.doNotParse))try{return JSON.parse(r)}catch(i){}return e}var s=globalThis&&globalThis.__assign||function(){return s=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},s.apply(this,arguments)};const c=function(){function r(t,r){var i=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(t,r){return"string"==typeof t?e(t,r):"object"==typeof t&&null!==t?t:{}}(t,r),new Promise((function(){i.HAS_DOCUMENT_COOKIE="object"==typeof document&&"string"==typeof document.cookie})).catch((function(){}))}return r.prototype._updateBrowserValues=function(t){this.HAS_DOCUMENT_COOKIE&&(this.cookies=e(document.cookie,t))},r.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},r.prototype.get=function(e,t,r){return void 0===t&&(t={}),this._updateBrowserValues(r),a(this.cookies[e],t)},r.prototype.getAll=function(e,t){void 0===e&&(e={}),this._updateBrowserValues(t);var r={};for(var i in this.cookies)r[i]=a(this.cookies[i],e);return r},r.prototype.set=function(e,r,i){var n;"object"==typeof r&&(r=JSON.stringify(r)),this.cookies=s(s({},this.cookies),((n={})[e]=r,n)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=t(e,r,i)),this._emitChange({name:e,value:r,options:i})},r.prototype.remove=function(e,r){var i=r=s(s({},r),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=s({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=t(e,"",i)),this._emitChange({name:e,value:void 0,options:r})},r.prototype.addChangeListener=function(e){this.changeListeners.push(e)},r.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},r}();function p(e){this.message=e}p.prototype=new Error,p.prototype.name="InvalidCharacterError";var u="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new p("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,i,n=0,o=0,a="";i=t.charAt(o++);~i&&(r=n%4?64*r+i:i,n++%4)?a+=String.fromCharCode(255&r>>(-2*n&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return a};function h(e){this.message=e}function f(e,t){if("string"!=typeof e)throw new h("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(u(t).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}catch(r){return u(t)}}(e.split(".")[r]))}catch(i){throw new h("Invalid token specified: "+i.message)}}h.prototype=new Error,h.prototype.name="InvalidTokenError";export{c as C,f as o};
